"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[708],{2767:function(t,e,s){s.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("header",{staticClass:"head"},[e("div",{staticClass:"left"},[t._t("logo"),t.leftBack?e("div",{on:{click:function(e){return t.$router.go(-1)}}},[e("svg",{staticClass:"back"},[e("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])]):t._e()],2),e("div",{staticClass:"msg"},[t._t("message")],2),e("div",{staticClass:"login"},[t._t("login")],2)])},r=[],i={name:"Header",data(){return{}},props:{leftBack:{type:String}}},o=i,n=s(1001),l=(0,n.Z)(o,a,r,!1,null,null,null),c=l.exports},6708:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t._self._c;return e("div",[e("Header",{attrs:{leftBack:"true"}},[e("div",{attrs:{slot:"message"},slot:"message"},[t._v(t._s(t.city))]),e("div",{attrs:{slot:"login"},on:{touchend:function(e){return t.$router.go(-1)}},slot:"login"},[t._v("切换城市")])]),e("div",{staticClass:"box"},[e("form",{on:{submit:function(t){t.preventDefault()}}},[e("div",{staticClass:"searchAddress"},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"search",required:"",placeholder:"输入学校、商务楼、地址"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),e("div",[e("input",{staticClass:"btn",attrs:{type:"submit",value:"提交"},on:{touchend:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}})])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.list,expression:"!list"}],staticClass:"searchHistory"},[t._v("搜索历史")]),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.list,expression:"!list"}],staticClass:"addressList"},[e("ul",t._l(t.historyAddress,(function(s,a){return e("li",{key:a,on:{touchend:function(e){return t.nextPage(s.name,s.address,s.geohash)}}},[e("h4",[t._v(t._s(s.name))]),e("p",[t._v(t._s(s.address))])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.historyAddress,expression:"historyAddress"}],staticClass:"clear",on:{touchstart:t.clearHistory}},[t._v(" 清空所有 ")])]),e("div",{staticClass:"addressList"},[e("ul",t._l(t.list,(function(s,a){return e("li",{key:a,on:{touchend:function(e){return t.nextPage(s.name,s.address,s.geohash)}}},[e("h4",[t._v(t._s(s.name))]),e("p",[t._v(t._s(s.address))])])})),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tipSearch,expression:"tipSearch"}],staticClass:"noResult"},[t._v(" 很抱歉!无搜索结果 ")])])],1)},r=[],i=(s(7658),s(2767)),o=s(963),n={name:"City",components:{Header:i.Z},data(){return{cityId:this.$route.query.city,city:"",keyword:"",list:null,historyAddress:"",tipSearch:!1}},methods:{initCity(){(0,o.hw)(this.cityId).then((t=>{this.city=t.name})).catch((t=>{console.log(t)}))},search(){(0,o.Gp)(this.cityId,this.keyword).then((t=>{0==t.length||t.message?this.tipSearch=!0:(this.tipSearch=!1,this.list=t)})).catch((t=>{console.log(t)}))},nextPage(t,e,s){let a=!1,r=[{name:t,address:e,geohash:s}];if(localStorage.getItem("placeHistory"))return r=JSON.parse(localStorage.getItem("placeHistory")),r.forEach((e=>{e.name!=t||(a=!0)})),a||(r.push({name:t,address:e,geohash:s}),localStorage.setItem("placeHistory",JSON.stringify(r))),void this.$router.push("/msite");localStorage.setItem("placeHistory",JSON.stringify(r)),this.$router.push("/msite")},initHistory(){localStorage.getItem("placeHistory")&&(this.historyAddress=JSON.parse(localStorage.getItem("placeHistory")))},clearHistory(){localStorage.removeItem("placeHistory"),this.historyAddress=""}},created(){this.initCity(),this.initHistory()}},l=n,c=s(1001),d=(0,c.Z)(l,a,r,!1,null,"a5418866",null),u=d.exports}}]);
//# sourceMappingURL=708.a88cf7d3.js.map