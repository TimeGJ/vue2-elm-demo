"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[112],{9736:function(s,t,e){e.d(t,{Z:function(){return u}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"alt_box"},[t("div",{staticClass:"alertTip"},[s._m(0),t("span",[s._v(s._s(s.tipText))]),t("div",{staticClass:"confrim",on:{touchstart:s.closeTip}},[s._v("确认")])])])},r=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"bd"},[t("div"),t("div")])}],n={name:"Alert-Tip",data(){return{}},props:{tipText:{String:String}},methods:{closeTip(){this.$emit("closeTip")}}},a=n,o=e(1001),l=(0,o.Z)(a,i,r,!1,null,"f4806116",null),u=l.exports},2767:function(s,t,e){e.d(t,{Z:function(){return u}});var i=function(){var s=this,t=s._self._c;return t("header",{staticClass:"head"},[t("div",{staticClass:"left"},[s._t("logo"),s.leftBack?t("div",{on:{click:function(t){return s.$router.go(-1)}}},[t("svg",{staticClass:"back"},[t("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])]):s._e()],2),t("div",{staticClass:"msg"},[s._t("message")],2),t("div",{staticClass:"login"},[s._t("login")],2)])},r=[],n={name:"Header",data(){return{}},props:{leftBack:{type:String}}},a=n,o=e(1001),l=(0,o.Z)(a,i,r,!1,null,null,null),u=l.exports},9112:function(s,t,e){e.r(t),e.d(t,{default:function(){return f}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"box"},[t("headerVue",{attrs:{leftBack:"true"}},[t("div",{attrs:{slot:"message"},slot:"message"},[s._v("账户信息")])]),t("section",{staticClass:"user_info"},[t("div",[t("ul",[t("input",{ref:"img",staticClass:"put_img",attrs:{type:"file"},on:{change:s.putImg}}),t("li",[t("p",[s._v("头像")]),t("div",[s.userInfo?t("img",{staticClass:"img_bd",attrs:{src:s.userInfoImg,alt:""}}):s._e(),t("svg",[t("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])]),t("router-link",{attrs:{to:"/profile/info/setusername"}},[t("li",[t("p",[s._v("用户名")]),t("div",[t("span",{directives:[{name:"show",rawName:"v-show",value:s.username,expression:"username"}]},[s._v(s._s(s.username))]),t("svg",[t("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])]),t("router-link",{attrs:{to:"/profile/info/address"}},[t("li",[t("p",[s._v("收货地址")]),t("div",[t("span",[s._v(s._s(s.userAddress))]),t("svg",[t("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])])],1)])]),t("section",{staticClass:"phone_pwd"},[t("div",[t("ul",[s._m(0),t("li",{on:{touchend:s.showTip}},[t("div",[t("p",[t("svg",{staticClass:"svg_color"},[t("use",{attrs:{"xlink:href":"#icon-mobile-phone"}})]),t("span",[s._v("手机")])]),t("svg",[t("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])]),s._m(1),t("li",[t("router-link",{attrs:{to:"/forget"}},[t("div",[t("span",[s._v(" 登陆密码 ")]),t("div",[t("span",[s._v("修改")]),t("svg",[t("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])])],1)])])]),t("button",{staticClass:"btn",on:{touchend:s.logoff}},[s._v("退出登录")]),t("alertTipVue",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"show"}],attrs:{tipText:s.tipText},on:{closeTip:s.closeTip}}),t("router-view")],1)},r=[function(){var s=this,t=s._self._c;return t("li",[t("p",[s._v("账号绑定")])])},function(){var s=this,t=s._self._c;return t("li",[t("p",[s._v("安全设置")])])}],n=(e(7658),e(9736)),a=e(2767),o=e(963),l={data(){return{userInfo:null,imgBaseurl:"//elm.cangdu.org/img/",username:null,userAddress:"",show:!1,tipText:null,userInfoImg:null}},components:{alertTipVue:n.Z,headerVue:a.Z},inject:["reload"],methods:{async initUserInfo(){await(0,o.bG)().then((s=>{this.userInfo=s,this.userInfoImg=this.imgBaseurl+this.userInfo.avatar}))},logoff(){(0,o.w7)().then((s=>{"退出成功"==s.message&&(this.userInfo=null,this.$store.commit("clearUserInfo"),this.$router.push("/profile"),this.clear())})).catch((s=>{console.log(s)}))},putImg(){const s=new FormData;s.append("file",this.$refs.img.files[0]),console.log(s),(0,o.WT)(s).then((s=>{1===s.status?(this.show=!0,this.tipText="提交成功",this.userInfoImg=this.imgBaseurl+s.image_path):(this.show=!0,this.tipText="提交出错")})).catch((s=>{console.log(s)}))},clear(){this.reload()},showTip(){this.show=!0,this.tipText="请在手机APP中设置"},closeTip(){this.show=!1}},watch:{userInfo:{handler(s,t){s&&(this.$store.state.username?this.username=this.$store.state.username:0!=s.current_address_id?this.userAddress=s.current_address_id:this.username=s.username)}}},created(){this.initUserInfo()}},u=l,c=e(1001),h=(0,c.Z)(u,i,r,!1,null,"d92e5818",null),f=h.exports}}]);
//# sourceMappingURL=112.4bc7ddab.js.map