"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[285],{9921:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"box"},[t("Header",{attrs:{leftBack:"true"}},[t("div",{attrs:{slot:"message"},slot:"message"},[e._v("密码登录")])]),t("form",[t("section",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNum,expression:"phoneNum"}],attrs:{type:"text",placeholder:"账号"},domProps:{value:e.phoneNum},on:{input:function(t){t.target.composing||(e.phoneNum=t.target.value)}}})]),t("section",[e.showPassword?t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"text",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("div",{staticClass:"dotBox",class:{transBgc:e.showPassword}},[t("span",{ref:"dot",staticClass:"dot",class:{transRight:e.showPassword},on:{touchstart:e.showPwd}})])]),t("section",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.codeNumber,expression:"codeNumber"}],attrs:{type:"text",placeholder:"验证码",maxlength:"4"},domProps:{value:e.codeNumber},on:{input:function(t){t.target.composing||(e.codeNumber=t.target.value)}}}),t("img",{directives:[{name:"show",rawName:"v-show",value:e.codeImg,expression:"codeImg"}],staticClass:"img",attrs:{src:e.codeImg,alt:""}}),t("p",{on:{touchstart:e.transImg}},[e._v("看不清？换一张")])])]),t("p",[e._v("温馨提示：未注册过的账号，登录时将自动注册 ")]),t("p",[e._v("注册过的用户可凭账号密码登录")]),t("div",{staticClass:"submit",on:{touchstart:e.submit}},[e._v("登录")]),t("router-link",{attrs:{to:"/forget"}},[e._v("重置密码？")]),t("alertTip",{directives:[{name:"show",rawName:"v-show",value:e.showAlert,expression:"showAlert"}],attrs:{tipText:e.alertText},on:{closeTip:e.closeTip}},[e._v(e._s(e.alertText))])],1)},r=[],a=(s(7658),s(5410)),i=s.n(a),n=s(2767),l=s(963),u=s(9736),d={name:"Login",components:{Header:n.Z,alertTip:u.Z},data(){return{phoneNum:null,password:null,codeNumber:null,showPassword:!1,codeImg:null,alertText:"",showAlert:!1}},computed:{rightPhoneNumber(){return/^1\d{10}$/.test(this.phoneNum)},rightCodeNumber(){return/^\d{4}$/.test(this.codeNumber)}},methods:{showPwd(){this.showPassword=!this.showPassword},transImg(){(0,l.ur)().then((e=>{this.codeImg=e.code}))},submit(){if(this.transImg(),!this.rightPhoneNumber)return this.showAlert=!0,void(this.alertText="手机号码格式不正确");if(null===this.password)return this.showAlert=!0,void(this.alertText="请输入密码");if(!this.rightPhoneNumber)return this.showAlert=!0,void(this.alertText="验证码格式不正确");let e={username:this.phoneNum,password:this.password,captcha_code:this.codeNumber};e=i().stringify(e),(0,l.vq)(e).then((e=>{e.user_id?(this.$store.state.userInfo=e.user_id,console.log(this.$store.state.userInfo),localStorage.removeItem("user_id"),localStorage.setItem("user_id",e.user_id),this.$router.push("/")):(this.showAlert=!0,this.alertText=e.message)})).catch((e=>{console.log(e)}))},closeTip(){this.showAlert=!1}},created(){this.transImg()}},h=d,m=s(1001),c=(0,m.Z)(h,o,r,!1,null,"6e6470aa",null),p=c.exports}}]);
//# sourceMappingURL=285.84e8906b.js.map