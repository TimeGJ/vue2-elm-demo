"use strict";(self["webpackChunkelm"]=self["webpackChunkelm"]||[]).push([[762],{663:function(s,t,e){e.d(t,{Z:function(){return h}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"footer"},[t("div",[t("router-link",{attrs:{to:"/msite"}},[t("svg",[t("use",{class:{changeColor:"msite"==s.userName},attrs:{"xlink:href":"#icon-eleme"}})]),t("span",[s._v("外卖")])])],1),t("div",[t("router-link",{attrs:{to:"/search"}},[t("svg",[t("use",{class:{changeColor:"search"==s.userName},attrs:{"xlink:href":"#icon-discover"}})]),t("span",[s._v("搜索")])])],1),t("div",[t("router-link",{attrs:{to:"/order"}},[t("svg",[t("use",{class:{changeColor:"order"==s.userName},attrs:{"xlink:href":"#icon-tickets"}})]),t("span",[s._v("订单")])])],1),t("div",[t("router-link",{attrs:{to:"/profile"}},[t("svg",[t("use",{class:{changeColor:"profile"==s.userName},attrs:{"xlink:href":"#icon-user"}})]),t("span",[s._v("我的")])])],1)])},r=[],a={name:"Foot",props:{userName:{String:String}},data(){return{}}},n=a,o=e(1001),l=(0,o.Z)(n,i,r,!1,null,"3daa6e38",null),h=l.exports},2767:function(s,t,e){e.d(t,{Z:function(){return h}});var i=function(){var s=this,t=s._self._c;return t("header",{staticClass:"head"},[t("div",{staticClass:"left"},[s._t("logo"),s.leftBack?t("div",{on:{click:function(t){return s.$router.go(-1)}}},[t("svg",{staticClass:"back"},[t("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])]):s._e()],2),t("div",{staticClass:"msg"},[s._t("message")],2),t("div",{staticClass:"login"},[s._t("login")],2)])},r=[],a={name:"Header",data(){return{}},props:{leftBack:{type:String}}},n=a,o=e(1001),l=(0,o.Z)(n,i,r,!1,null,null,null),h=l.exports},3079:function(s,t,e){e.d(t,{Z:function(){return g}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"box"},[t("ul",s._l(s.shoppingList,(function(e){return s.shoppingList?t("router-link",{key:e.id,attrs:{to:{path:"/shop",query:{id:e.id}}}},[t("li",{staticClass:"shopping-box"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:s.imgBaseurl+e.image_path,alt:""}}),t("div",{staticClass:"left-font"},[t("div",[t("span",{staticClass:"brand"},[s._v("品牌")]),t("h4",[s._v(s._s(e.name))])]),t("div",{staticClass:"star_box"},[t("Star",{attrs:{starLeave:e.rating}}),t("span",{staticClass:"star_tip"},[s._v(s._s(e.rating))]),t("span",{staticClass:"sell-num"},[s._v("月售"+s._s(e.recent_order_num)+"单")])],1),t("div",[t("span",{staticClass:"delivery"},[s._v("￥"+s._s(e.float_minimum_order_amount)+"起送/")]),t("span",{staticClass:"delivery"},[s._v(s._s(e.piecewise_agent_fee.tips)+"元")])])])]),t("div",{staticClass:"right"},[t("ul",s._l(e.supports,(function(e){return t("li",{key:e.id},[s._v(s._s(e.icon_name))])})),0),t("p",{staticClass:"right_delivery"},[t("span",[s._v(s._s(e.delivery_mode.text))]),t("span",[s._v("准时达")])]),t("p",{staticClass:"distance-time"},[t("span",[s._v(s._s(e.distance)+"/")]),t("span",[s._v(s._s(e.order_lead_time))])])])])]):s._e()})),1)])},r=[],a=function(){var s=this,t=s._self._c;return t("div",{staticClass:"box"},[t("section",{staticClass:"star_flex"},s._l(5,(function(s){return t("svg",{key:s,staticClass:"star_box"},[t("use",{attrs:{"xlink:href":"#icon-star-on"}})])})),0),t("div",{staticClass:"star_overflow",style:"width:"+.5*s.starLeave+"rem"},[t("section",{staticClass:"star_flex"},s._l(5,(function(s){return t("svg",{key:s,staticClass:"star_fill"},[t("use",{attrs:{"xlink:href":"#icon-star-on"}})])})),0)])])},n=[],o={name:"star",props:{starLeave:{type:Number}},data(){return{}}},l=o,h=e(1001),c=(0,h.Z)(l,a,n,!1,null,"7b07dd81",null),d=c.exports,u=e(963),p={name:"shoplist",components:{Star:d},props:{hash:{},hashLatitude:{},hashLongitude:{},keyword:{},offset:{default:0},limit:{default:20},categoryId:{},categoryIds:{},order_by:{},delivery_mode:{},support_ids:{}},data(){return{shoppingList:null,imgBaseurl:"//elm.cangdu.org/img/"}},methods:{shopList(){(0,u.ym)(this.hashLatitude,this.hashLongitude,this.offset,this.limit,this.categoryId,this.order_by,this.delivery_mode,this.support_ids,this.categoryIds).then((s=>{this.shoppingList=s})).catch((s=>{console.log(s)}))},searchList(s,t){(0,u.Mh)(s,t).then((s=>{this.shoppingList=s})).catch((s=>{console.log(s)}))}},watch:{hashLatitude:{handler(s,t){this.shopList()},immediate:!0},categoryIds:{handler(s,t){this.shopList()}},keyword:{handler(s,t){this.searchList(this.hash,s)}}},created(){}},f=p,_=(0,h.Z)(f,i,r,!1,null,"0d918c0c",null),g=_.exports},2762:function(s,t,e){e.r(t),e.d(t,{default:function(){return p}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"box"},[t("Header",[t("router-link",{attrs:{slot:"logo",to:"/search"},slot:"logo"},[t("svg",[t("use",{attrs:{"xlink:href":"#icon-search"}})])]),t("div",{attrs:{slot:"message"},on:{touchstart:s.backHome},slot:"message"},[s._v(s._s(s.address.name))]),this.$store.state.userInfo?s._e():t("router-link",{attrs:{slot:"login",to:{path:"/login"}},slot:"login"},[t("span",[s._v("登录|注册")])])],1),t("nav",[s.foodList?t("div",{staticClass:"bannerbox"},[t("div",{ref:"swiperBox",staticClass:"banner",on:{touchmove:s.swiper,touchstart:s.initX,touchend:s.swiperEnd}},s._l(s.foodList,(function(e,i){return t("div",{key:i,staticClass:"swiperList"},[t("ul",s._l(e,(function(e){return t("router-link",{key:e.id,attrs:{to:{path:"/food",query:{title:e.title,id:e.id}}}},[t("li",[t("img",{attrs:{src:s.imgBaseurl+e.image_url,alt:""}}),t("span",[s._v(s._s(e.title))])])])})),1)])})),0),s._l(s.circleNum,(function(e){return t("span",{ref:"circle",refInFor:!0,staticClass:"swiper-circle",class:{"circle-Change":s.index==e-1}})}))],2):s._e()]),t("div",{staticClass:"shopping-list"},[t("div",{staticClass:"shopping-tip"},[t("svg",[t("use",{attrs:{"xlink:href":"#icon-s-shop"}})]),t("span",{staticClass:"tip"},[s._v("附近商家")])]),t("shoppingList",{attrs:{hashLatitude:s.address.latitude,hashLongitude:s.address.longitude}})],1),t("Footer",{attrs:{userName:"msite"}})],1)},r=[],a=(e(7658),e(2767)),n=e(663),o=e(3079),l=e(963),h={name:"Msite",components:{Header:a.Z,Footer:n.Z,shoppingList:o.Z},data(){return{address:"",foodList:null,imgBaseurl:"https://fuss10.elemecdn.com",m:null,w:null,index:0,circleNum:null}},methods:{initAddress(){(0,l.Ul)(this.$store.state.position).then((s=>{this.address=s}))},backHome(){this.$router.push("/")},initFoodList(){(0,l.oH)().then((s=>{let t=[...s],e=[];for(let i=0,r=0;i<s.length;i+=8,r++)e[r]=t.splice(0,8);e[e.length]=e[0],this.foodList=e,this.circleNum=this.foodList.length-1})).catch((s=>{console.log(s)}))},swiper(s){this.w<0&&(this.index=2,this.$refs.swiperBox.style.transform="translateX(-"+this.$refs.swiperBox.offsetWidth*this.index+"px)"),this.w=this.m-s.targetTouches[0].pageX+this.index*this.$refs.swiperBox.offsetWidth,this.$refs.swiperBox.style.transform="translateX(-"+this.w+"px)"},initX(s){this.$refs.swiperBox.style.transition="none",this.m=s.targetTouches[0].pageX,2==this.index&&(this.index=0,this.$refs.swiperBox.style.transform="translateX(-0px)")},swiperEnd(){let s=this.$refs.swiperBox.offsetWidth;this.w-s*this.index>s/3?(this.index++,this.$refs.swiperBox.style.transition="All 1s",2==this.index&&this.$refs.circle[0].classList.add("circle-Change")):this.w-s*this.index<-s/3?(this.index--,this.$refs.swiperBox.style.transition="All 1s"):this.$refs.swiperBox.style.transition="All 1s",this.$refs.swiperBox.style.transform="translateX(-"+s*this.index+"px)"}},created(){this.$store.commit("initPosition"),this.initAddress(),this.initFoodList()}},c=h,d=e(1001),u=(0,d.Z)(c,i,r,!1,null,"6ef47ce8",null),p=u.exports}}]);
//# sourceMappingURL=762.597e3f29.js.map